[Unit]
Description=Ollama Service (IPEX-LLM SYCL Backend)
After=network-online.target

[Service]
ExecStart=/opt/ipex-llm/ollama serve
User=ollama
Group=ollama
Restart=always
RestartSec=3
WorkingDirectory=/opt/ipex-llm

# IPEX-LLM environment
Environment="OLLAMA_NUM_GPU=999"
Environment="OLLAMA_HOST=127.0.0.1:11434"
Environment="no_proxy=localhost,127.0.0.1"
Environment="ZES_ENABLE_SYSMAN=1"
Environment="SYCL_CACHE_PERSISTENT=1"
Environment="SYCL_PI_LEVEL_ZERO_USE_IMMEDIATE_COMMANDLISTS=1"

# Use bundled SYCL libraries
Environment="LD_LIBRARY_PATH=/opt/ipex-llm"

[Install]
WantedBy=default.target
