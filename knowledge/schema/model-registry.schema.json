{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/amc-corey-cox/cc_forge/knowledge/schema/model-registry.schema.json",
  "title": "CC Forge Model Registry Entry",
  "description": "Schema for tracking local AI models, their capabilities, and performance characteristics. Compatible with Hugging Face Model Card conventions.",
  "type": "object",
  "required": ["id", "name", "source", "tier", "status", "tested"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^model-[a-z0-9-]+$",
      "description": "Unique identifier (model-<name> format)"
    },
    "name": {
      "type": "string",
      "description": "Human-readable model name"
    },
    "version": {
      "type": "string",
      "description": "Model version or variant"
    },
    "source": {
      "type": "object",
      "required": ["provider", "model_id"],
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["ollama", "huggingface", "local", "api"],
          "description": "Where the model comes from"
        },
        "model_id": {
          "type": "string",
          "description": "Provider-specific identifier (e.g., 'llama3.2:7b' for Ollama)"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to model page/documentation"
        },
        "base_model": {
          "type": "string",
          "description": "Parent model if this is a fine-tune/quantization"
        }
      }
    },
    "tier": {
      "type": "string",
      "enum": ["gpu", "cpu", "api"],
      "description": "Which inference tier this model runs on"
    },
    "status": {
      "type": "string",
      "enum": ["untested", "testing", "validated", "retired", "failed"],
      "description": "Current status in our system"
    },
    "tested": {
      "type": "string",
      "format": "date",
      "description": "Date last tested"
    },
    "capabilities": {
      "type": "object",
      "properties": {
        "tasks": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "text-generation",
              "code-generation",
              "code-review",
              "summarization",
              "classification",
              "embedding",
              "chat",
              "instruction-following",
              "reasoning"
            ]
          },
          "description": "Tasks this model is suited for"
        },
        "context_length": {
          "type": "integer",
          "description": "Maximum context window in tokens"
        },
        "languages": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Programming/natural languages supported"
        }
      }
    },
    "requirements": {
      "type": "object",
      "properties": {
        "vram_gb": {
          "type": "number",
          "description": "VRAM required in GB"
        },
        "ram_gb": {
          "type": "number",
          "description": "System RAM required in GB"
        },
        "quantization": {
          "type": "string",
          "description": "Quantization level (e.g., Q4_K_M, Q8_0, FP16)"
        },
        "parameters": {
          "type": "string",
          "description": "Parameter count (e.g., 7B, 13B, 70B)"
        }
      }
    },
    "performance": {
      "type": "object",
      "description": "Measured performance on our hardware",
      "properties": {
        "tokens_per_second": {
          "type": "number",
          "description": "Generation speed (tokens/sec)"
        },
        "time_to_first_token_ms": {
          "type": "number",
          "description": "Latency to first token (ms)"
        },
        "load_time_seconds": {
          "type": "number",
          "description": "Time to load model (seconds)"
        },
        "hardware_notes": {
          "type": "string",
          "description": "Hardware used for benchmarks (reference only, no specifics)"
        }
      }
    },
    "quality": {
      "type": "object",
      "description": "Subjective quality assessments for our use cases",
      "properties": {
        "code_generation": {
          "type": "string",
          "enum": ["excellent", "good", "adequate", "poor", "untested"]
        },
        "code_review": {
          "type": "string",
          "enum": ["excellent", "good", "adequate", "poor", "untested"]
        },
        "summarization": {
          "type": "string",
          "enum": ["excellent", "good", "adequate", "poor", "untested"]
        },
        "instruction_following": {
          "type": "string",
          "enum": ["excellent", "good", "adequate", "poor", "untested"]
        },
        "notes": {
          "type": "string",
          "description": "Qualitative observations"
        }
      }
    },
    "use_cases": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "task": {
            "type": "string",
            "description": "What task to use this model for"
          },
          "why": {
            "type": "string",
            "description": "Why this model for this task"
          },
          "alternatives": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Other models that could work"
          }
        }
      },
      "description": "Recommended use cases in CC Forge"
    },
    "license": {
      "type": "string",
      "description": "Model license (e.g., MIT, Apache-2.0, Llama2)"
    },
    "notes": {
      "type": "string",
      "description": "Additional notes, quirks, or observations"
    }
  }
}
